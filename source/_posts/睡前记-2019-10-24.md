---
title: 睡前记-2019-10-24
catalog: true
date: 2019-10-24 20:43:57
subtitle:
header-img:
tags:
- 睡前记
---
## 机械硬盘

由盘面、磁头和悬臂组成机械硬盘，数据可以由磁道、扇区和柱面来定位。

## SSD

和机械硬盘构造不一样，SSD是通过电容加电压计存储数据的，访问速度快。裸片、平面、块、页的层次结构，对于数据的写入，只能是一页一页的，不能覆盖写入。写入操作需要垃圾回收机制整理出新的可写入块，才能继续。所以一般厂商会预留一部分空间来做磁盘整理。比如250G的SSD，会多出7%-15%的空间，保证250G空间的足量使用。

我们把操作系统和程序都放在一个SSD上，会出现操作系统占用的块很少写操作，程序块频繁写操作。受限于SSD的擦写次数，很快我们会造成坏块。怎么办？

这样吧。我们加个中间层。总线访问中间层，中间层访问硬盘。实现逻辑地址到实际地址的映射。同时实现对块擦写的均衡调度。比如某个块写入的多了，就将不长变动的信息放在这里，平衡擦写次数。

## 协处理器

CPU非常快，而I/O设备相对很慢，为了避免CPU忙等或数据大处理不来，需要找个助手。就有了协处理器。

e.g. nginx的静态文本，可以做到cpu 零拷贝。直接通过协处理器，发送给网络。

通过协处理器实现性能提升，有个著名的项目，叫 Kafka .

## 保证数据完整性

服务端，CPU常年高负荷运行，因为系统的复杂性，可能会出现单比特翻转。e.g. 00100110->00110110。PC上倒不容易出现，毕竟一般CPU利用率不高。

那怎么解决内存中数据处理中发生意外性错误呢？对数据进行校验!设计一个合理的机制，使得处理中的数据既有数据位，也有校验位，当数据位出错的时候，可以通过校验位检测甚至自动修复。

海明编码理论帮我们实现了这样的事情。



## 董小姐

- 今天收拾了点东西，书籍装箱以及打包冬天衣服的时候，全程录了视频，用以裁剪后发在头条上。对拍视频形成了一种习惯吧。晚上裁剪的时候，发现这样效果挺好，不做作。

- 下午带了些废纸下去，给了楼下捡废品的一个大爷。然后去邮政发现提供的包装袋是收费的，董小姐在楼下问刚才的大爷有没有合适的袋子。真有。

- ‘社会你靓姐！’，她有自信说出。



